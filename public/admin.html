<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#163f86" />
    <title>&#x1F4DA; KitaabPadho Admin</title>
    <link rel="icon" type="image/svg+xml" href="/assets/icons/bookish.svg" />
    <link rel="stylesheet" href="/assets/css/app.css?v=20260226i" />
  </head>
  <body>
    <header class="kb-header">
      <div class="kb-topbar">
        <a class="kb-brand" href="/">
          <span class="kb-brand-mark">KP</span>
          <span>
            <strong>KitaabPadho Admin</strong>
            <small>Project actions and controls</small>
          </span>
        </a>
        <div class="drawer-actions" style="justify-content:end">
          <a class="kb-btn kb-btn-ghost" href="/">Client</a>
          <a class="kb-btn kb-btn-ghost" href="/seller">Seller</a>
          <a class="kb-btn kb-btn-ghost" href="/delivery">Delivery</a>
          <button id="adminLogoutBtn" class="kb-btn kb-btn-dark" type="button" hidden>Logout</button>
        </div>
      </div>
      <nav id="adminPortalNav" class="kb-nav hidden">
        <a id="adminActionsNav" class="active" href="#adminMainPanel">Admin Actions</a>
        <a id="adminBannerNav" href="#adminBannerPanel">Banners</a>
        <a id="adminSupportNav" href="#adminSupportPanel">Customer Service</a>
        <a id="adminProfileNav" href="#adminProfilePanel">Profile</a>
      </nav>
    </header>

    <main class="kb-main">
      <section id="adminLoginPanel" class="panel">
        <div class="panel-head">
          <h2>Admin Login</h2>
        </div>
        <form id="adminLoginForm" class="drawer admin-login-form">
          <input class="kb-input" name="email" type="email" placeholder="Admin email" required />
          <input class="kb-input" name="password" type="password" placeholder="Password" required />
          <button class="kb-btn kb-btn-primary" type="submit">Login as Admin</button>
        </form>
        <p id="adminLoginStatus" class="muted"></p>
        <p id="adminRoleHint" class="muted">Only users with admin role can open this panel.</p>
      </section>

      <section id="adminMainPanel" class="panel hidden">
        <div class="panel-head">
          <h2>Admin Panel</h2>
          <button id="adminRefreshBtn" class="kb-btn kb-btn-ghost" type="button">Refresh</button>
        </div>
        <p id="adminStatus" class="muted">Loading admin data...</p>
        <div id="adminSummary" class="admin-summary"></div>
        <div class="filter-grid admin-filter-grid">
          <input id="adminSearchInput" class="kb-input" placeholder="Search summary/email" />
          <input id="adminActionTypeFilter" class="kb-input" placeholder="Action type" />
          <input id="adminEntityTypeFilter" class="kb-input" placeholder="Entity type" />
          <button id="adminApplyFiltersBtn" class="kb-btn kb-btn-dark" type="button">Apply</button>
        </div>
        <div id="adminActionsList" class="admin-actions"></div>

        <div class="panel-head" style="margin-top:0.9rem">
          <h3>Resource CRUD</h3>
          <button id="adminCrudRefreshBtn" class="kb-btn kb-btn-ghost" type="button">Refresh Resources</button>
        </div>
        <p id="adminCrudStatus" class="muted">View, update, and delete latest listings, posts, comments, and delivery jobs.</p>
        <div class="admin-crud-grid">
          <section class="drawer">
            <h4>Listings</h4>
            <div id="adminCrudListings"></div>
          </section>
          <section class="drawer">
            <h4>Community Posts</h4>
            <div id="adminCrudPosts"></div>
          </section>
          <section class="drawer">
            <h4>Community Comments</h4>
            <div id="adminCrudComments"></div>
          </section>
          <section class="drawer">
            <h4>Delivery Jobs</h4>
            <div id="adminCrudDelivery"></div>
          </section>
        </div>

        <div class="panel-head" style="margin-top:0.9rem">
          <h3>Delivery Pricing</h3>
        </div>
        <form id="adminDeliveryRateForm" class="drawer" style="max-width:420px">
          <input id="adminDeliveryRateInput" class="kb-input" type="number" min="0" max="500" step="0.01" placeholder="INR per 10 KM" />
          <button class="kb-btn kb-btn-primary" type="submit">Save Delivery Rate</button>
          <p id="adminDeliveryRateStatus" class="muted"></p>
        </form>

        <div class="panel-head" style="margin-top:0.9rem">
          <h3>User CRUD</h3>
          <button id="adminUsersRefreshBtn" class="kb-btn kb-btn-ghost" type="button">Refresh Users</button>
        </div>
        <div class="drawer-actions">
          <input id="adminUsersSearchInput" class="kb-input" placeholder="Search users by email or name" />
          <button id="adminUsersSearchBtn" class="kb-btn kb-btn-dark" type="button">Search</button>
        </div>
        <form id="adminCreateUserForm" class="drawer">
          <h4>Create User</h4>
          <div class="drawer-grid">
            <input class="kb-input" name="fullName" placeholder="Full name" required />
            <input class="kb-input" name="email" type="email" placeholder="Email" required />
            <input class="kb-input" name="phoneNumber" type="tel" placeholder="Phone number" required />
            <input class="kb-input" name="password" type="password" placeholder="Password (min 8)" required />
            <select class="kb-select" name="role" required>
              <option value="student">Student</option>
              <option value="seller">Seller</option>
              <option value="delivery">Delivery</option>
              <option value="admin">Admin</option>
            </select>
          </div>
          <button class="kb-btn kb-btn-primary" type="submit">Create User</button>
        </form>
        <p id="adminUsersStatus" class="muted">Create, view, update, and delete user accounts.</p>
        <div id="adminUsersList" class="cards"></div>
      </section>

      <section id="adminBannerPanel" class="panel hidden">
        <div class="panel-head">
          <h2>Banner Manager</h2>
          <button id="adminBannerRefreshBtn" class="kb-btn kb-btn-ghost" type="button">Refresh</button>
        </div>
        <form id="adminBannerForm" class="drawer">
          <input name="title" class="kb-input" placeholder="Banner title" required />
          <textarea name="message" class="kb-textarea" placeholder="Banner text"></textarea>
          <input name="linkUrl" class="kb-input" placeholder="Redirect URL" />
          <input name="buttonText" class="kb-input" placeholder="Button text" />
          <select name="scope" class="kb-select">
            <option value="local">Local</option>
            <option value="india">India</option>
            <option value="all">All</option>
          </select>
          <input name="priority" class="kb-input" type="number" value="10" />
          <label class="file-pick">
            <span>Banner image</span>
            <input name="image" type="file" accept="image/*" />
          </label>
          <label><input name="isActive" type="checkbox" checked /> Active</label>
          <button class="kb-btn kb-btn-primary" type="submit">Publish Banner</button>
          <p id="adminBannerStatus" class="muted"></p>
        </form>
        <div id="adminBannerList" class="cards"></div>
      </section>

      <section id="adminSupportPanel" class="panel hidden">
        <div class="panel-head">
          <h2>Customer Service Queries</h2>
          <button id="adminSupportRefreshBtn" class="kb-btn kb-btn-ghost" type="button">Refresh</button>
        </div>
        <div id="adminFeedbackList" class="cards"></div>
      </section>

      <section id="adminProfilePanel" class="panel hidden">
        <div class="panel-head">
          <h2>Admin Profile</h2>
        </div>
        <form id="adminProfileForm" class="drawer" style="max-width:520px">
          <input class="kb-input" name="fullName" placeholder="Full name" required />
          <input class="kb-input" name="email" type="email" placeholder="Email" readonly />
          <input class="kb-input" name="phoneNumber" type="tel" placeholder="Phone number" required />
          <button class="kb-btn kb-btn-primary" type="submit">Save Profile</button>
          <p id="adminProfileStatus" class="muted"></p>
        </form>
        <form id="adminPasswordForm" class="drawer" style="max-width:520px">
          <input class="kb-input" name="currentPassword" type="password" placeholder="Current password" required />
          <input class="kb-input" name="newPassword" type="password" placeholder="New password (min 8)" required />
          <button class="kb-btn kb-btn-dark" type="submit">Change Admin Password</button>
          <p id="adminPasswordStatus" class="muted"></p>
        </form>
        <form id="adminUserResetForm" class="drawer" style="max-width:520px">
          <h4>Reset User Password</h4>
          <input class="kb-input" name="email" type="email" placeholder="User email" required />
          <input class="kb-input" name="newPassword" type="password" placeholder="New password (min 8)" required />
          <button class="kb-btn kb-btn-primary" type="submit">Reset User Password</button>
          <p id="adminUserResetStatus" class="muted"></p>
        </form>
      </section>
    </main>

    <footer class="kb-footer">
      <p>Made by UPSC aspirant. Built for learners across India. KitaabPadhoIndia. @2026 copyright</p>
    </footer>

    <script type="module" src="/assets/js/admin-page.js?v=20260226i"></script>
  </body>
</html>





